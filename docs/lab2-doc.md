# 实验二指导文档

### 任务二 分布式节点管理与通信

分布式环境搭建是分布式数据库的基础，需实现节点管理、通信协议及集群配置功能，确保节点间协同工作。

#### 任务 2.1 节点管理

实现节点的注册、发现、心跳检测及状态维护，确保集群节点状态可见。


RegisterNode：节点启动时向管理器注册 IP、端口、角色（如计算节点 / 存储节点）。
StartHeartbeat：通过定时发送心跳包检测节点存活，超时未响应则标记为故障。


#### 任务 2.2 分布式通信协议

实现节点间基于 RPC 的通信机制，支持请求发送、响应处理及异常重试。

需补全RpcClient和RpcServer类：


RpcClient::SendRequest：支持超时重试，处理网络波动导致的临时失败。
RpcServer::RegisterHandler：注册不同类型请求（如数据查询、分片迁移）的处理逻辑。


#### 任务 2.3 集群配置管理

维护集群配置信息（如节点列表、分片映射），支持配置更新与同步。

UpdateConfig：配置变更时记录版本号，确保节点间配置一致性。
SyncConfigToAllNodes：通过广播机制将新配置同步到集群所有节点。


